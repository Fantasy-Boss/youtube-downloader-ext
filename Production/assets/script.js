$(document).ready(()=>{chrome.tabs.query({active:!0,currentWindow:!0},function(e){let t=e[0],r=new URL(t.url);r.href.includes("youtube.com/watch")?check(r.searchParams.get("v")):($(".search").addClass("free"),$(".or").hide(),$(".content").hide(),$(".loader").fadeOut(300)),$("#search").click(()=>input())})});let title="";const check=e=>{e?(fetch(`https://noembed.com/embed?url=https://www.youtube.com/watch?v=${e}`).then(e=>e.json()).then(e=>{$(".search").removeClass("free"),$(".or").show(),$(".content").show(),$(".content img").attr("src",e.thumbnail_url),$(".content .name").text(e.title),$(".loader").fadeOut(300),title=e.title}).catch(()=>error("An error occurred")),$("#audio").click(()=>load(`https://www.yt-download.org/api/button/mp3/${e}`)),$("#video").click(()=>load(`https://www.yt-download.org/api/button/videos/${e}`))):error("An error occurred")},load=e=>{$(".loader").css("background-color","rgb(15, 29, 44)"),$(".loader").fadeIn(100),$(".next").load(`${e} .download`,()=>{$(".loader").fadeOut(100),$(".next").append('<div class="back">< Go Back</div>'),$(".back").click(()=>{$(".next").hide(),$(".container").show()}),$(".download").addClass("noselect"),$(".container").hide(),$(".next").show()})},input=()=>{let e=$("#input").val().replace("https://","").replace("www.","");if(""==$("#input").val())error("Field is empty");else if(e.includes("youtube.com/watch")){let e=new URL($("#input").val());check(e.searchParams.get("v"))}else if(e.includes("youtu.be/")){let t=e.replace("youtu.be/","");if(11!=t.length){let e="";for(let r=0;r<11;r++)e+=t[r];check(e)}else check(t)}else error("This isn't a Youtube link")};var timer,isTimer=!1;const error=e=>{$(".err").text(e).show(100),isTimer&&clearTimeout(timer),isTimer=!0,timer=setTimeout(()=>{isTimer=!1,$(".err").hide(100)},5e3)};